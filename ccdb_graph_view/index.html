<!DOCTYPE html>
<meta charset="utf-8">

<body>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script> -->
<script src="vendors/require.min.js"></script>

<script>
  require.config({
    paths: {
      // d3: "http://d3js.org/d3.v4.min"
      d3: "vendors/d3.v4.min"
    }
  });
</script>
<script>

  let sim = null;
  let stooges = null;
  require(["js/force"], function (force) {

    sim = new force.Force(500,500)
        .fetch( (name) => {return {name: name}} )
        .root_key("bobby");
    sim.init();

    stooges = [
      {name: "larry", parent: "root"},
      {name: "moe", parent: "root"},
      {name: "curly",parent: "root"}
    ]

    cycle = function () {
      // this will happen later, but start the timer now.
      setTimeout( () => {
          stooges = sim._data.splice(4,3);
          // sim._data.pop(); sim._data.pop(); sim._data.pop();// = [{name: "root"}, {name: "steve", parent: "root"}, {name: "joe", parent: "steve"}, {name: "robert", parent: "steve"}];
          sim.update();
        }, 2500);

      // this will happen first
      sim._data = sim._data.concat(stooges);
      sim.update();
    };

    setTimeout(() => {
      cycle();
      // loop forever.
      setInterval(() => {
        cycle();
      }, 5000);
    }, 2500);





  });
</script>
</body>
